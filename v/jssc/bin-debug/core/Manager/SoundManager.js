var __reflect=this&&this.__reflect||function(n,o,e){n.__class__=o,e?e.push(o):e=[o],n.__types__=n.__types__?e.concat(n.__types__):e},game;!function(n){var o=function(){function n(){}return n.loadSound=function(o){o in n._soundDict||(n._soundDict[o]=n.getNewSound(o))},n.setEffectSoundConfig=function(o){n._effectSoundConfig=o},n.setBGMVolume=function(o){n._bgmVolume=o,n.setSoundVolume(n._bgm,o)},n.setBGM=function(o){n._bgm=o;var e=n._bgmObj=n.getNewSound(o);e.sound&&(e.sound.type="music")},n.stopBGM=function(){n.stopSound(n._bgm)},n.playBGM=function(){return n.playSound(n._bgm,0)},n.initAllSound=function(){if(!n._soundInited){n._soundInited=!0;var o;for(var e in n._soundDict)o=n._soundDict[e],o.inited||(n.playSound(e,1,0),n.stopSound(e))}},n.stopAllSound=function(){for(var o in n._soundDict)n.stopSound(o)},n.setAllEffectSoundVolume=function(o){n._effVolume=o;for(var e in n._soundDict)e!=n._bgm&&n.setSoundVolume(e,o)},n.setSoundVolume=function(o,e){var t=n.getSoundObj(o);t&&t.sc&&(t.sc.volume=e)},n.getSoundChannel=function(o){var e=n.getSoundObj(o);return e?e.sc:null},n.getSoundObj=function(o){return n._soundDict[o]},n.playSound=function(o,e,t,u,d){void 0===e&&(e=1),void 0===t&&(t=NaN),void 0===u&&(u=!1),void 0===d&&(d=!1);var i,s=n.getSoundObj(o);if(s){if(s.sc&&!u)return null;i=s.sound,s.sc&&n.stopSound(o)}else s=n._soundDict[o]=n.getNewSound(o,e,t,d),i=s.sound;return n.doPlay(s,o,e,t),s.sc},n.doPlay=function(o,e,t,u){void 0===t&&(t=1),void 0===u&&(u=NaN);var d=o.sound;if(d&&d.length>0){var i=o.sc=d.play(0,t);e==n._bgm?i.volume=isNaN(u)?n._bgmVolume:u:i.volume=isNaN(u)?n._effVolume:u,o.inited=!0,n._channelDict[i.hashCode]=o,o.sc.addEventListener(egret.Event.SOUND_COMPLETE,n.onSoundComplete,n)}},n.stopSound=function(o){var e;if(o in n._soundDict){e=n._soundDict[o];var t=e.sc;t&&(t.stop(),n.releaseSoundChannel(t))}},n.getNewSound=function(o,t,u,d){void 0===t&&(t=1),void 0===u&&(u=NaN),void 0===d&&(d=!1);var i=new e;return i.sound=RES.getRes(o),i.sound||RES.getResAsync(o,function(e){i.sound=e,d&&n.doPlay(i,o,t,u)},this),i},n.onSoundComplete=function(o){var e=o.currentTarget;n.releaseSoundChannel(e)},n.releaseSoundChannel=function(o){o.removeEventListener(egret.Event.SOUND_COMPLETE,n.onSoundComplete,n);var e=n._channelDict[o.hashCode];e.sc=null,n._channelDict[o.hashCode]=null,delete n._channelDict[o.hashCode]},n}();o._soundDict=new Object,o._channelDict=new Object,o._effVolume=1,o._bgmVolume=.5,o._soundInited=!1,n.SoundManager=o,__reflect(o.prototype,"game.SoundManager");var e=function(){function n(){}return n}();__reflect(e.prototype,"SoundObj")}(game||(game={}));