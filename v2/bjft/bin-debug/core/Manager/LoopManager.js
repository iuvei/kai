var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},game;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return e._stage},enumerable:!0,configurable:!0}),e.init=function(t){e._stage=t,e._secondDic=new Object,e._frameDic=new Object,e._nextFrameDic=new Object,e._timeOutDic=new Object,e._intervalDic=new Object,e._stage.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,null),e._frameRates=[],e._realFrameRate=t.frameRate,e.TICK=t.frameRate,e._timer=new egret.Timer(e.TICK),e._timer.addEventListener(egret.TimerEvent.TIMER,e.onTimer,null),e._timer.start(),e._secTimer=new egret.Timer(1e3),e._secTimer.addEventListener(egret.TimerEvent.TIMER,e.onSecTimer,null),e._secTimer.start()},e.addToSecond=function(t,n){var i,a=e._secondDic;for(var c in a)if(i=a[c],i.thisObject==n&&i.func==t)return i.id;var o=e.getId(),i=new r;return i.id=o,i.func=t,i.thisObject=n,a[o]=i,o},e.addToFrame=function(t,n){var i,a=e._frameDic;for(var c in a)if(i=a[c],i.thisObject==n&&i.func==t)return i.id;var o=e.getId(),i=new r;return i.id=o,i.func=t,i.thisObject=n,a[o]=i,o},e.addNextFrame=function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var c,o=e._nextFrameDic;for(var u in o)if(c=o[u],c.thisObject==n&&c.func==t)return c.id;var l=e.getId(),c=new r;return c.id=l,c.func=t,c.params=i,c.thisObject=n,o[l]=c,l},e.removeFromeSecond=function(t){var r=e._secondDic;t in r&&delete r[t]},e.removeFromFrame=function(t){var r=e._frameDic;t in r&&delete r[t]},e.removeFromNextFrame=function(t){var r=e._nextFrameDic;t in r&&delete r[t]},e.setTimeout=function(t,n,i){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var o=new r;return o.func=t,o.delay=egret.getTimer()+i,o.params=a,o.id=e.getId(),o.thisObject=n,e._timeOutDic[o.id]=o,o.id},e.clearTimeOut=function(t){var r=e._timeOutDic;if(t in r){var n=r[t];delete r[t],n.dispose()}},e.setInterval=function(t,n,i){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var o=new r;return o.func=t,o.interval=i,o.delay=egret.getTimer()+i,o.params=a,o.id=e.getId(),o.thisObject=n,e._intervalDic[o.id]=o,o.id},e.clearInterval=function(t){var r=e._intervalDic;if(t in r){var n=r[t];delete r[t],n.dispose()}},e.onTimer=function(){var t;e._currentTime=egret.getTimer();var r,n=e._timeOutDic;for(r in n)t=n[r],e._currentTime>=t.delay&&(delete n[r],null!=t.func&&t.func.apply(t.thisObject,t.params),t.dispose());n=e._intervalDic;for(r in n)t=n[r],e._currentTime>=t.delay&&(t.delay+=t.interval,t.func.apply(t.thisObject,t.params))},e.onSecTimer=function(){var t,r,n=e._secondDic;for(r in n)t=n[r],e._currentTime>=t.delay&&(t.delay+=t.interval,t.func.apply(t.thisObject,t.params))},e.onEnterFrame=function(t){var r,n,i=e._frameDic;for(n in i)r=i[n],r.func.call(r.thisObject);i=e._nextFrameDic;for(n in i)r=i[n],delete i[n],r.func.apply(r.thisObject,r.params);e.doFrameRate()},e.doFrameRate=function(){var t=e._loopTime=egret.getTimer();e._frameHold=t-e._lastTime,e._lastTime=t;var r=1e3/e._frameHold,n=e._frameRates;if(n.length<12)return void n.push(r);n.shift(),n.push(r),e._total=0;for(var i=0;i<n.length;i++)e._total+=n[i];e._realFrameRate=e._total/n.length},e.getId=function(){return++e._id},Object.defineProperty(e,"realFrameRate",{get:function(){return e._realFrameRate},enumerable:!0,configurable:!0}),Object.defineProperty(e,"frameRate",{get:function(){return e._stage.frameRate},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMini",{get:function(){return e._realFrameRate<3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loopTime",{get:function(){return e._loopTime},enumerable:!0,configurable:!0}),e}();t._id=0,t._currentTime=0,t.TICK=0,t._total=NaN,t._realFrameRate=NaN,t._lastTime=0,t._loopTime=0,t._frameHold=0,e.LoopManager=t,__reflect(t.prototype,"game.LoopManager");var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t.delay=0,t.interval=0,t}return __extends(t,e),t.prototype.dispose=function(){this.thisObject=null,this.func=null,this.params=null},t}(egret.HashObject);__reflect(r.prototype,"LoopVo")}(game||(game={}));