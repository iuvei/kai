var __reflect=this&&this.__reflect||function(t,e,a){t.__class__=e,a?a.push(e):a=[e],t.__types__=t.__types__?a.concat(t.__types__):a},__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},game;!function(t){var e=function(e){function a(){var t=e.call(this)||this;return t.action_park="park",t.action_move="move",t.action_accelerate="accelerate",t._replaceDict={},a.dragonbonesFactory||(a.dragonbonesFactory=new dragonBones.EgretFactory,a.dragonbonesFactory.parseDragonBonesData(RES.getRes("carAnim_ske_json")),a.dragonbonesFactory.parseTextureAtlasData(RES.getRes("carAnim_tex_json"),RES.getRes("carAnim_tex_png")),a.dragonbonesFactory.parseDragonBonesData(RES.getRes("carSkin_ske_json")),a.dragonbonesFactory.parseTextureAtlasData(RES.getRes("carSkin_tex_json"),RES.getRes("carSkin_tex_png"))),t._face=a.dragonbonesFactory.buildArmatureDisplay("carUnit","carAnim"),t.addChild(t._face),t}return __extends(a,e),a.prototype.setData=function(t){e.prototype.setData.call(this,t),this.setAction(this.action_park)},a.prototype.setAction=function(t){if(this._lastAction!=t&&(this._animState=this._face.animation.play(t),this._lastAction=t,!this._replaceDict[t])){var e=this._face.armature.getSlot("car");a.dragonbonesFactory.replaceSlotDisplay("carSkin","car",this._data.name,this._data.name,e),this._replaceDict[t]=1}},a.prototype.move=function(){this._status!=t.UnitStatus.standby&&(this.x+=t.TileConst.DIRECTION*this.speed)},a.prototype.stop=function(){for(var t,e=this._face.armature.getSlots(),a=0,n=e.length;a<n;++a)t=e[a].childArmature,t&&t.animation.stop()},a.prototype.play=function(){for(var t,e=this._face.armature.getSlots(),a=0,n=e.length;a<n;++a)t=e[a].childArmature,t&&t.animation.play()},Object.defineProperty(a.prototype,"status",{get:function(){return this._status},set:function(e){if(this._status!=e){this._status;switch(this._status=e,e){case t.UnitStatus.standby:this._face.visible=!1,this.setAction(this.action_park);break;case t.UnitStatus.move:this._face.visible=!0,this.setAction(this.action_move);break;case t.UnitStatus.accelerate:this._face.visible=!0,this.setAction(this.action_accelerate)}}},enumerable:!0,configurable:!0}),a.prototype.onLoop=function(){e.prototype.onLoop.call(this)},a}(t.SceneUnit);t.SceneAnimate=e,__reflect(e.prototype,"game.SceneAnimate")}(game||(game={}));